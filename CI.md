# GitHub Actions CI/CD Pipeline - WP Addon Plugin

## üìã –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∏ —Ä–∞–±–æ—Ç—É GitHub Actions CI/CD pipeline –¥–ª—è WP Addon Plugin. –ó–¥–µ—Å—å –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ —à–∞–≥–∏, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã CI –≤ —Å–ª—É—á–∞–µ –ø–æ–ª–æ–º–∫–∏.

## üéØ –¶–µ–ª–∏ CI Pipeline

- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ –≤–µ—Ä—Å–∏–π PHP
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏** —Å WordPress test suite
- **–ê–Ω–∞–ª–∏–∑ –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞** –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –æ—Ç—á–µ—Ç–æ–≤
- **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–π** –ø–µ—Ä–µ–¥ merge –≤ main/develop

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
.github/
‚îî‚îÄ‚îÄ workflows/
    ‚îî‚îÄ‚îÄ test.yml          # –û—Å–Ω–æ–≤–Ω–æ–π CI workflow
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Workflow

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

```yaml
name: Tests
on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        php: ['8.2', '8.3', '8.4']
```

### Services (–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)

```yaml
services:
  mysql:
    image: mysql:8.0
    env:
      MYSQL_ROOT_PASSWORD: root
      MYSQL_DATABASE: wordpress_test
      MYSQL_USER: wordpress
      MYSQL_PASSWORD: wordpress
    ports:
      - 3306:3306
    options: --health-cmd="mysqladmin ping" --health-interval=10s --health-timeout=5s --health-retries=3
```

## üöÄ –ü–æ—à–∞–≥–æ–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ CI

### –®–∞–≥ 1: Checkout –∫–æ–¥–∞

```yaml
- uses: actions/checkout@v4
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ö–ª–æ–Ω–∏—Ä—É–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ runner.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** –î–æ—Å—Ç—É–ø –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é.

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PHP

```yaml
- name: Setup PHP
  uses: shivammathur/setup-php@v2
  with:
    php-version: ${{ matrix.php }}
    extensions: pdo, pdo_mysql, mbstring, intl, zip
    coverage: xdebug
    tools: composer:v2
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é PHP
- –í–∫–ª—é—á–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è: `pdo`, `pdo_mysql`, `mbstring`, `intl`, `zip`
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Xdebug –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Composer v2

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- shivammathur/setup-php@v2 action
- PHP –≤–µ—Ä—Å–∏–∏ 8.2, 8.3, –∏–ª–∏ 8.4

### –®–∞–≥ 3: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Composer –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```yaml
- name: Cache Composer dependencies
  uses: actions/cache@v3
  with:
    path: vendor
    key: ${{ runner.os }}-php-${{ matrix.php }}-composer-${{ hashFiles('**/composer.lock') }}
    restore-keys: |
      ${{ runner.os }}-php-${{ matrix.php }}-composer-
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ö—ç—à–∏—Ä—É–µ—Ç –ø–∞–ø–∫—É `vendor` –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏
- –ö–ª—é—á –∫—ç—à–∞ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ OS, PHP –≤–µ—Ä—Å–∏–∏ –∏ hash composer.lock
- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫—ç—à –µ—Å–ª–∏ —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** actions/cache@v3

### –®–∞–≥ 4: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Composer –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```yaml
- name: Install Composer dependencies
  run: composer install --no-progress --prefer-dist --optimize-autoloader
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç PHP –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ composer.json
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤—ã –≤–º–µ—Å—Ç–æ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ (--prefer-dist)
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–ª–æ–∞–¥–µ—Ä –¥–ª—è production

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- composer.json –∏ composer.lock –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- –î–æ—Å—Ç—É–ø –∫ Packagist

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ WordPress test environment

```yaml
- name: Setup WordPress test environment
  run: |
    git clone --depth=1 https://github.com/WordPress/wordpress-develop.git /tmp/wordpress-develop
    cd /tmp/wordpress-develop
    cp wp-tests-config-sample.php wp-tests-config.php
    sed -i "s/youremptytestdbnamehere/wordpress_test/" wp-tests-config.php
    sed -i "s/yourusernamehere/wordpress/" wp-tests-config.php
    sed -i "s/yourpasswordhere/wordpress/" wp-tests-config.php
    sed -i "s|localhost|127.0.0.1|" wp-tests-config.php
    # Add proper table prefix and other settings
    sed -i "s/\$table_prefix  = 'wptests_';/\$table_prefix  = 'wp_';/" wp-tests-config.php
    echo "define('WP_DEBUG', true);" >> wp-tests-config.php
    echo "define('WP_DEBUG_LOG', false);" >> wp-tests-config.php
    echo "define('WP_DEBUG_DISPLAY', true);" >> wp-tests-config.php
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. –ö–ª–æ–Ω–∏—Ä—É–µ—Ç WordPress develop —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (--depth=1 –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏)
2. –ö–æ–ø–∏—Ä—É–µ—Ç sample –∫–æ–Ω—Ñ–∏–≥ –≤ —Ä–∞–±–æ—á–∏–π
3. –ó–∞–º–µ–Ω—è–µ—Ç placeholders –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ë–î
4. –ò–∑–º–µ–Ω—è–µ—Ç —Ö–æ—Å—Ç –Ω–∞ 127.0.0.1 (–¥–ª—è Docker networking)
5. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–µ—Ñ–∏–∫—Å —Ç–∞–±–ª–∏—Ü –Ω–∞ 'wp_'
6. –î–æ–±–∞–≤–ª—è–µ—Ç debug –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –î–æ—Å—Ç—É–ø –∫ github.com/WordPress/wordpress-develop.git
- MySQL —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω

### –®–∞–≥ 6: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è

```yaml
- name: Set WP_TESTS_DIR environment variable
  run: echo "WP_TESTS_DIR=/tmp/wordpress-develop" >> $GITHUB_ENV
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è WP_TESTS_DIR –¥–ª—è —Ç–µ—Å—Ç–æ–≤.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** $GITHUB_ENV –¥–æ—Å—Ç—É–ø–µ–Ω –≤ GitHub Actions.

### –®–∞–≥ 7: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```yaml
- name: Create test database
  run: |
    mysql -h 127.0.0.1 -u root -proot -e "CREATE DATABASE IF NOT EXISTS wordpress_test;"
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –°–æ–∑–¥–∞–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö wordpress_test –≤ MySQL.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- MySQL —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω –Ω–∞ 127.0.0.1:3306
- Root –ø–∞—Ä–æ–ª—å: 'root'
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 'wordpress' —Å –ø–∞—Ä–æ–ª–µ–º 'wordpress' —Å–æ–∑–¥–∞–Ω

### –®–∞–≥ 8: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ WordPress test suite

```yaml
- name: Install WordPress test suite
  run: |
    cd /tmp/wordpress-develop
    php tests/phpunit/includes/install.php wp-tests-config.php
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ó–∞–ø—É—Å–∫–∞–µ—Ç WordPress install script
- –°–æ–∑–¥–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç WordPress –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- PHP —Å pdo_mysql —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º
- wp-tests-config.php –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞

### –®–∞–≥ 9: –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```yaml
- name: Run tests
  run: composer test -- --exclude-group problematic
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ —Ç–µ—Å—Ç—ã —á–µ—Ä–µ–∑ Composer —Å–∫—Ä–∏–ø—Ç
- –ò—Å–∫–ª—é—á–∞–µ—Ç —Ç–µ—Å—Ç—ã —Å –≥—Ä—É–ø–ø–æ–π @group problematic

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- composer.json —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º —Å–∫—Ä–∏–ø—Ç–æ–º test
- –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- WP_TESTS_DIR –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞

### –®–∞–≥ 10: –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º (—Ç–æ–ª—å–∫–æ PHP 8.2)

```yaml
- name: Run tests with coverage
  run: composer test:coverage
  if: matrix.php == '8.2'
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã —Å –∞–Ω–∞–ª–∏–∑–æ–º –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç clover.xml –æ—Ç—á–µ—Ç

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- Xdebug —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- composer.json —Å —Å–∫—Ä–∏–ø—Ç–æ–º test:coverage

### –®–∞–≥ 11: –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç—á–µ—Ç–æ–≤ –ø–æ–∫—Ä—ã—Ç–∏—è (—Ç–æ–ª—å–∫–æ PHP 8.2)

```yaml
- name: Upload coverage reports
  uses: codecov/codecov-action@v3
  if: matrix.php == '8.2'
  with:
    file: ./coverage/clover.xml
    fail_ci_if_error: false
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç clover.xml –≤ Codecov
- –ù–µ –ø–∞–¥–∞–µ—Ç —Å–±–æ—Ä–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- codecov/codecov-action@v3
- CODECOV_TOKEN –≤ secrets (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üîß –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π

### –ü—Ä–æ–±–ª–µ–º–∞: "Could not open input file: bin/install.php"

**–°–∏–º–ø—Ç–æ–º—ã:** –û—à–∏–±–∫–∞ –≤ —à–∞–≥–µ "Install WordPress test suite"

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É—Ç—å –∫ install.php
- –î–æ–ª–∂–µ–Ω –±—ã—Ç—å: `tests/phpunit/includes/install.php`
- –ê –ù–ï: `bin/install.php` –∏–ª–∏ `tests/bin/install.php`

### –ü—Ä–æ–±–ª–µ–º–∞: "Failed opening required 'wp-tests-config.php'"

**–°–∏–º–ø—Ç–æ–º—ã:** –û—à–∏–±–∫–∞ require_once –≤ install.php

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ wp-tests-config.php —Å–æ–∑–¥–∞–Ω –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —à–∞–≥–µ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ sed –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω–∏–ª–∏—Å—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª

### –ü—Ä–æ–±–ª–µ–º–∞: "SQLSTATE[HY000] [2002] Connection refused"

**–°–∏–º–ø—Ç–æ–º—ã:** –¢–µ—Å—Ç—ã –Ω–µ –º–æ–≥—É—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ MySQL

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ MySQL —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health checks –≤ services.mysql.options
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 127.0.0.1 –≤–º–µ—Å—Ç–æ localhost

### –ü—Ä–æ–±–ª–µ–º–∞: "Class 'Patchwork\...' not found"

**–°–∏–º–ø—Ç–æ–º—ã:** –û—à–∏–±–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å Patchwork –≤ —Ç–µ—Å—Ç–∞—Ö

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Brain Monkey —É–¥–∞–ª–µ–Ω –∏–∑ composer.json
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å bootstrap.php –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç mock'–æ–≤ Patchwork
- –ó–∞–ø—É—Å–∫–∞—Ç—å —Ç–µ—Å—Ç—ã —Å --exclude-group problematic

### –ü—Ä–æ–±–ª–µ–º–∞: –¢–µ—Å—Ç—ã –≤–∏—Å—è—Ç –∏–ª–∏ —Ç–∞–π–º–∞—É—Ç—è—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:** –°–±–æ—Ä–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ —Ç–∞–π–º–∞—É—Ç—É

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å composer test —Å–∫—Ä–∏–ø—Ç –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ WP_TESTS_DIR –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **–û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏:** 1.5-2 –º–∏–Ω—É—Ç—ã
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —à–∞–≥–∏:** WordPress setup (30-45 —Å–µ–∫), Tests (10-20 —Å–µ–∫)

### –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
- **–¶–µ–ª–µ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:** > 80%
- **–û—Ç—á–µ—Ç—ã:** clover.xml -> Codecov
- **–ê–Ω–∞–ª–∏–∑:** –¢–æ–ª—å–∫–æ –Ω–∞ PHP 8.2 –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

## üöÄ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö PHP –≤–µ—Ä—Å–∏–π

```yaml
strategy:
  matrix:
    php: ['8.1', '8.2', '8.3', '8.4']
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥—Ä—É–≥–∏—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö

```yaml
services:
  mysql:
    image: mysql:8.0
  postgres:
    image: postgres:13
    # ... –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```

### –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ jobs

```yaml
jobs:
  test:
    # ... existing config
  lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run PHPStan
        run: composer lint
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Secrets –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

- **CODECOV_TOKEN:** –î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–∫—Ä—ã—Ç–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **–î—Ä—É–≥–∏–µ —Å–µ–∫—Ä–µ—Ç—ã:** –ù–µ —Ç—Ä–µ–±—É—é—Ç—Å—è –¥–ª—è –±–∞–∑–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã

### –î–æ—Å—Ç—É–ø—ã

- **GitHub —Ç–æ–∫–µ–Ω—ã:** –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã:** Codecov (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üìù –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –í GitHub Actions UI
# Actions -> Workflow runs -> –í—ã–±—Ä–∞—Ç—å run -> View logs
```

### –õ–æ–∫–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ –≤ Docker
docker run -it --rm \
  -v $(pwd):/app \
  -w /app \
  php:8.2-cli \
  bash

# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
composer install
# ... –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —à–∞–≥–∏ CI
```

## üéØ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–æ–ª–æ–º–∫–∏

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å workflow —Ñ–∞–π–ª
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ .github/workflows/test.yml —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å YAML

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –í—Å–µ actions –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã (checkout@v4, cache@v3 –∏ —Ç.–¥.)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏–∏ actions –Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–≥–æ–≤
- –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–∞–∂–¥—ã–π —à–∞–≥ –≤—Ä—É—á–Ω—É—é –ª–æ–∫–∞–ª—å–Ω–æ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ MySQL —Å–µ—Ä–≤–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –®–∞–≥ 5: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
- –ï—Å–ª–∏ workflow —Å–ª–æ–º–∞–Ω - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ git –∏—Å—Ç–æ—Ä–∏–∏
- –ï—Å–ª–∏ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã - –Ω–∞–π—Ç–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

- [ ] .github/workflows/test.yml —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [ ] –í—Å–µ actions –¥–æ—Å—Ç—É–ø–Ω—ã –∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã
- [ ] MySQL —Å–µ—Ä–≤–∏—Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] composer.json –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
- [ ] tests/bootstrap.php –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] WordPress develop –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] Codecov —Ç–æ–∫–µ–Ω —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –ù–æ—è–±—Ä—å 2025
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ üöÄ
