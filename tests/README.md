# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é WP Addon Plugin

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è WP Addon Plugin, –≤–∫–ª—é—á–∞—è –ø—Ä–∏–Ω—Ü–∏–ø—ã TDD (Test-Driven Development), –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –∏ –ø–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π.

## üìã –û–±–∑–æ—Ä —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

WP Addon Plugin –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å:
- **Unit —Ç–µ—Å—Ç–∞–º–∏** –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Feature —Ç–µ—Å—Ç–∞–º–∏** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –º–æ–¥—É–ª–µ–π
- **Smoke —Ç–µ—Å—Ç–∞–º–∏** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- **–ü–æ–ª–Ω—ã–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º** –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—É—Ç–µ–π –∫–æ–¥–∞

### üéØ –¶–µ–ª–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- –ì–∞—Ä–∞–Ω—Ç–∏—è —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç—ã
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –±–µ–∑ —Å—Ç—Ä–∞—Ö–∞ –ø–æ–ª–æ–º–æ–∫

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥—ã

```
tests/
‚îú‚îÄ‚îÄ bootstrap.php              # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ TestCase.php              # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å —Å —É—Ç–∏–ª–∏—Ç–∞–º–∏
‚îú‚îÄ‚îÄ DatabaseMigrations.php    # –¢—Ä–µ–π—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îú‚îÄ‚îÄ Unit/                     # Unit —Ç–µ—Å—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ LazyLoadingTest.php
‚îÇ   ‚îú‚îÄ‚îÄ FactoriesTest.php
‚îÇ   ‚îú‚îÄ‚îÄ ModuleSystemTest.php
‚îÇ   ‚îî‚îÄ‚îÄ [–º–æ–¥—É–ª—å]Test.php
‚îú‚îÄ‚îÄ Feature/                  # Feature —Ç–µ—Å—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ LazyLoadingIntegrationTest.php
‚îÇ   ‚îú‚îÄ‚îÄ SmokeTest.php
‚îÇ   ‚îî‚îÄ‚îÄ ExampleTest.php
‚îî‚îÄ‚îÄ Factories/                # –§–∞–±—Ä–∏–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    ‚îú‚îÄ‚îÄ PostFactory.php
    ‚îú‚îÄ‚îÄ AssetFactory.php
    ‚îî‚îÄ‚îÄ [Factory].php
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
composer install
```

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

```bash
composer test
```

### –ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º

```bash
composer test:coverage
# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã: coverage/index.html
```

## üìù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (TDD)

### üîÑ TDD —Ü–∏–∫–ª

```
üî¥ RED ‚Üí üü¢ GREEN ‚Üí üîµ REFACTOR
```

1. **RED**: –ù–∞–ø–∏—à–∏ —Ç–µ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–∞–¥–∞–µ—Ç
2. **GREEN**: –†–µ–∞–ª–∏–∑—É–π –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥ –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è
3. **REFACTOR**: –£–ª—É—á—à–∏ –∫–æ–¥, —Å–æ—Ö—Ä–∞–Ω—è—è —Ç–µ—Å—Ç—ã –∑–µ–ª—ë–Ω—ã–º–∏

### üìã –®–∞–≥–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è

#### 1. –û–ø—Ä–µ–¥–µ–ª–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –º–æ–¥—É–ª—è

```php
// –ü—Ä–∏–º–µ—Ä: –ù–æ–≤—ã–π –º–æ–¥—É–ª—å ImageOptimization
// –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
// - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
// - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤ JPG, PNG, WebP
// - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ > 80%
// - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞
```

#### 2. –°–æ–∑–¥–∞–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–¥—É–ª—è

```php
// src/Interfaces/ImageOptimizationInterface.php
interface ImageOptimizationInterface extends ModuleInterface
{
    public function optimizeImage(string $filePath): bool;
    public function getSupportedFormats(): array;
}
```

#### 3. –ù–∞–ø–∏—à–∏ —Ç–µ—Å—Ç—ã –ü–ï–†–ï–î —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π

```php
// tests/Unit/ImageOptimizationTest.php
describe('ImageOptimization', function () {
    beforeEach(function () {
        $this->service = new ImageOptimizationService();
    });

    it('optimizes JPG images', function () {
        $originalSize = filesize('/path/to/test.jpg');
        $result = $this->service->optimizeImage('/path/to/test.jpg');

        expect($result)->toBeTrue();
        expect(filesize('/path/to/test.jpg'))->toBeLessThan($originalSize);
    });

    it('returns supported formats', function () {
        $formats = $this->service->getSupportedFormats();

        expect($formats)->toContain('jpg');
        expect($formats)->toContain('png');
        expect($formats)->toContain('webp');
    });

    it('preserves image quality', function () {
        // –¢–µ—Å—Ç –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
        $originalQuality = $this->getImageQuality('/path/to/test.jpg');
        $this->service->optimizeImage('/path/to/test.jpg');
        $optimizedQuality = $this->getImageQuality('/path/to/test.jpg');

        expect($optimizedQuality)->toBeGreaterThan(80);
    });
});
```

#### 4. –†–µ–∞–ª–∏–∑—É–π –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥

```php
// src/Services/ImageOptimizationService.php
class ImageOptimizationService
{
    public function optimizeImage(string $filePath): bool
    {
        // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤
        if (!file_exists($filePath)) {
            return false;
        }

        // –ó–∞–≥–ª—É—à–∫–∞ - –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º true
        return true;
    }

    public function getSupportedFormats(): array
    {
        return ['jpg', 'png', 'webp'];
    }
}
```

#### 5. –ó–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç—ã –∏ –∏—Å–ø—Ä–∞–≤—å

```bash
composer test tests/Unit/ImageOptimizationTest.php
```

#### 6. –î–æ–±–∞–≤—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

```php
// tests/Feature/ImageOptimizationIntegrationTest.php
describe('ImageOptimization Integration', function () {
    it('integrates with WordPress upload', function () {
        // –¢–µ—Å—Ç –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å WP
        $attachmentId = $this->createTestImage();
        $optimized = apply_filters('wp_handle_upload', ['file' => '/path/to/image.jpg']);

        expect($optimized)->toBeTrue();
        expect($this->isImageOptimized($attachmentId))->toBeTrue();
    });
});
```

#### 7. –î–æ–±–∞–≤—å —Ñ–∞–±—Ä–∏–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```php
// tests/Factories/ImageFactory.php
class ImageFactory extends Factory
{
    protected function getModelClass(): string
    {
        return 'attachment';
    }

    protected function define(): array
    {
        return [
            'post_title' => $this->faker->sentence(),
            'post_type' => 'attachment',
            'post_mime_type' => 'image/jpeg',
            // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
        ];
    }
}
```

## üß™ –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

### Unit —Ç–µ—Å—Ç—ã

–¢–µ—Å—Ç–∏—Ä—É—é—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –∏–∑–æ–ª—è—Ü–∏–∏:

```php
describe('OptionService', function () {
    it('retrieves option values', function () {
        $service = new OptionService();
        $value = $service->getSetting('test_option', 'default');

        expect($value)->toBe('default');
    });
});
```

### Feature —Ç–µ—Å—Ç—ã

–¢–µ—Å—Ç–∏—Ä—É—é—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

```php
describe('LazyLoading Integration', function () {
    it('applies lazy loading to content', function () {
        $module = new LazyLoading($optionService);
        $content = '<img src="image.jpg" alt="test">';

        $result = $module->processContent($content);

        expect($result)->toContain('loading="lazy"');
    });
});
```

### Smoke —Ç–µ—Å—Ç—ã

–ü—Ä–æ–≤–µ—Ä—è—é—Ç –±–∞–∑–æ–≤—É—é —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å:

```php
describe('Smoke Test', function () {
    it('plugin initializes without errors', function () {
        $plugin = new WpAddonPlugin();
        $result = $plugin->init();

        expect($result)->toBeTrue();
    });
});
```

## üìö –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤

### 1. **–û–¥–∏–Ω —Ç–µ—Å—Ç - –æ–¥–Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**

```php
// –•–æ—Ä–æ—à–æ
it('validates email format', function () {
    // –¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ email
});

it('saves user to database', function () {
    // –¢–æ–ª—å–∫–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
});

// –ü–ª–æ—Ö–æ
it('validates and saves user', function () {
    // –î–≤–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
});
```

### 2. **–ß–∏—Ç–∞–µ–º—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤**

```php
// –•–æ—Ä–æ—à–æ
it('throws exception when file not found')
it('returns cached result on second call')
it('ignores files smaller than 1KB')

// –ü–ª–æ—Ö–æ
it('test file')
it('check cache')
it('small files')
```

### 3. **–ò–∑–æ–ª—è—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**

```php
describe('UserService', function () {
    beforeEach(function () {
        $this->db = Mockery::mock(Database::class);
        $this->service = new UserService($this->db);
    });

    it('creates user', function () {
        $this->db->shouldReceive('insert')->once()->andReturn(1);

        $result = $this->service->create(['name' => 'John']);

        expect($result)->toBe(1);
    });
});
```

### 4. **–¢–µ—Å—Ç–∏—Ä—É–π –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –Ω–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é**

```php
// –•–æ—Ä–æ—à–æ: —Ç–µ—Å—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
it('sends welcome email after registration', function () {
    $user = $this->registerUser();
    expect($this->emailsSent())->toContain('welcome@site.com');
});

// –ü–ª–æ—Ö–æ: —Ç–µ—Å—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
it('calls mailer send method', function () {
    $this->spyOnMailer();
    $this->registerUser();
    expect($this->mailer->sendWasCalled())->toBeTrue();
});
```

### 5. **–ò—Å–ø–æ–ª—å–∑—É–π —Ñ–∞–±—Ä–∏–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö**

```php
describe('PostService', function () {
    it('publishes post', function () {
        $post = (new PostFactory())->create(['status' => 'draft']);
        $service = new PostService();

        $result = $service->publish($post['ID']);

        expect($result)->toBeTrue();
        expect($this->getPostStatus($post['ID']))->toBe('publish');
    });
});
```

### 6. **–¢–µ—Å—Ç–∏—Ä—É–π edge cases**

```php
describe('FileProcessor', function () {
    it('handles empty files', function () {
        $result = $this->processor->process('');
        expect($result)->toBeFalse();
    });

    it('handles non-existent files', function () {
        $result = $this->processor->process('/non/existent/file.txt');
        expect($result)->toBeFalse();
    });

    it('handles files without permissions', function () {
        $file = $this->createFileWithoutPermissions();
        $result = $this->processor->process($file);
        expect($result)->toBeFalse();
    });
});
```

### 7. **–ò—Å–ø–æ–ª—å–∑—É–π data providers –¥–ª—è –ø–æ—Ö–æ–∂–∏—Ö —Ç–µ—Å—Ç–æ–≤**

```php
describe('Calculator', function () {
    it('adds numbers correctly', function ($a, $b, $expected) {
        $result = $this->calculator->add($a, $b);
        expect($result)->toBe($expected);
    })->with([
        [1, 2, 3],
        [0, 0, 0],
        [-1, 1, 0],
        [100, 200, 300],
    ]);
});
```

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —É—Ç–∏–ª–∏—Ç—ã

### Mockery –¥–ª—è –º–æ–∫–æ–≤

```php
$mock = Mockery::mock(SomeClass::class);
$mock->shouldReceive('method')->andReturn('value');
```

### –§–∞–±—Ä–∏–∫–∏ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö

```php
// –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
$user = (new UserFactory())->create();
$post = (new PostFactory())->create(['author' => $user['ID']]);
```

### DatabaseMigrations –¥–ª—è –ë–î —Ç–µ—Å—Ç–æ–≤

```php
class MyTest extends TestCase
{
    use DatabaseMigrations;

    public function testCreatesRecord()
    {
        // –ë–î –æ—á–∏—â–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —Ç–µ—Å—Ç–æ–º
        $this->createPost(['title' => 'Test']);

        $count = $this->getPostsCount();
        expect($count)->toBe(1);
    }
}
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### Bootstrap.php

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç:
- WordPress –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã (ABSPATH, WPINC –∏ —Ç.–¥.)
- WordPress —Ñ—É–Ω–∫—Ü–∏–∏ (wp_die, apply_filters, add_action)
- –ë–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç–∏
- –ú–æ–∫–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### TestCase.php

–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:
- `runDatabaseMigrations()` - –æ—á–∏—Å—Ç–∫–∞ –ë–î
- `createMockAssetOptimizationService()` - –º–æ–∫–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- `createTempFile()` - —Å–æ–∑–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- `mockWpStyles()` / `mockWpScripts()` - –º–æ–∫–∏ WP –æ—á–µ—Ä–µ–¥–µ–π

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã –º–æ–≥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å CI —Å—Ä–µ–¥–æ–π:

```php
// –ü—Ä–æ–ø—É—Å–∫ –≤ CI
if (getenv('CI') === 'true') {
    test('skipped in CI', function () {})->skip('Reason');
    return;
}
```

–ò–ª–∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞:

```php
/**
 * @group problematic
 */
describe('Complex Test', function () {
    // –≠—Ç–æ—Ç —Ç–µ—Å—Ç –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω –≤ CI
});
```

–ó–∞–ø—É—Å–∫ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö:

```bash
composer test -- --exclude-group problematic
```

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

- **–ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞**: > 80%
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: < 30 —Å–µ–∫
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤**: > 20
- **–ü—Ä–æ—Ü–µ–Ω—Ç passing**: 100%

## üéì –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ–º—ã

### Mutation Testing

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Ç–µ—Å—Ç–æ–≤
composer test:mutation
```

### Property-based Testing

```php
it('works with any valid input', function ($input) {
    $result = $this->service->process($input);
    expect($result)->toBeValid();
})->with($this->generateRandomInputs());
```

### Performance Testing

```php
it('processes within time limit', function () {
    $start = microtime(true);
    $this->service->processLargeDataset();
    $duration = microtime(true) - $start;

    expect($duration)->toBeLessThan(1.0); // < 1 —Å–µ–∫
});
```

## üìñ –†–µ—Å—É—Ä—Å—ã

- [Pest Documentation](https://pestphp.com/)
- [Mockery Documentation](https://docs.mockery.io/)
- [WordPress Testing Handbook](https://developer.wordpress.org/block-editor/contributors/code/testing-overview/)

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–°–ª–µ–¥—É—è —ç—Ç–æ–º—É —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤—É, –≤—ã —Å–º–æ–∂–µ—Ç–µ:

1. **–ü–∏—Å–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** —Å —Ö–æ—Ä–æ—à–∏–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º
2. **–†–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –º–æ–¥—É–ª–∏ —á–µ—Ä–µ–∑ TDD** —Å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é
3. **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∫–æ–¥** –±–µ–∑ —Å—Ç—Ä–∞—Ö–∞ —Ä–µ–≥—Ä–µ—Å—Å–∏–π
4. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è** –±–µ–∑–æ–ø–∞—Å–Ω–æ

**–ü–æ–º–Ω–∏—Ç–µ**: –•–æ—Ä–æ—à–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ = –Ω–∞–¥–µ–∂–Ω—ã–π –∫–æ–¥! üöÄ
